<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>AES Encryption</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link rel="stylesheet" href="../style/style.css">
  <link rel="stylesheet" href="../style/main.css">
  <link rel="stylesheet" href="./assets/style/main.css">
  <link href="https://unpkg.com/aos@2.3.1/dist/aos.css" rel="stylesheet">
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.5/font/bootstrap-icons.css">

</head>

<body>

  <main class="main-content-wrapper">

    <header id="header"></header>
    

    <div class="card">
      <h1>Substitution Cipher</h1>
      <label for="key">Substitution Key (26 letters)</label>
      <input id="key" placeholder="QWERTYUIOPASDFGHJKLZXCVBNM">
      <label for="message">Message</label>
      <textarea id="message" placeholder="Enter your message"></textarea>
      <button onclick="encrypt()">Encrypt</button>
      <div class="box" id="encrypted">—</div>
      <button onclick="decrypt()">Decrypt</button>
      <div class="box" id="decrypted">—</div>
      <div class="footer">Educational Substitution Cipher</div>
    </div>

  </main>

  <script src="../app/header.js"></script>

  <script>
    function encrypt() {
      let key = document.getElementById("key").value.toUpperCase();
      let msg = document.getElementById("message").value;
      if (key.length !== 26) return alert("Key must have 26 letters");
      let map = {};
      for (let i = 0; i < 26; i++) map[String.fromCharCode(65 + i)] = key[i];
      let res = msg.split('').map(c => {
        let uc = c.toUpperCase();
        if (uc >= 'A' && uc <= 'Z') return map[uc];
        return c;
      }).join('');
      document.getElementById("encrypted").textContent = res;
      document.getElementById("decrypted").textContent = "—";
    }
    function decrypt() {
      let key = document.getElementById("key").value.toUpperCase();
      let cipher = document.getElementById("encrypted").textContent;
      if (key.length !== 26) return alert("Key must have 26 letters");
      if (!cipher || cipher === '—') return alert("Encrypt a message first");
      let map = {};
      for (let i = 0; i < 26; i++) map[key[i]] = String.fromCharCode(65 + i);
      let res = cipher.split('').map(c => {
        let uc = c.toUpperCase();
        if (map[uc]) return map[uc];
        return c;
      }).join('');
      document.getElementById("decrypted").textContent = res;
    }
  </script>
</body>

</html>